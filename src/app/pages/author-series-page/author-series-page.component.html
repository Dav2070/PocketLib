<!-- Normal layout -->
<div
	class="container ms-motion-slideUpIn"
	[style.paddingBottom.px]="dataService.bottomToolbarVisible ? 56 : 0"
	*ngIf="!dualScreenLayout">

	<div class="mt-3 mb-4">
		<pocketlib-header
			[title]="seriesName.name"
			editButtonVisible="true"
			[backButtonLink]="backButtonLink"
			(editButtonClick)="ShowNamesDialog()">
		</pocketlib-header>
	</div>

	<div class="d-flex flex-column">
		<!-- Add button -->
		<div class="d-flex justify-content-center">
			<button
				class="d-flex align-items-center card cursor theme-background-color-secondary"
				[ngClass]="addButtonHover ? 'shadow' : 'shadow-sm'"
				style="transition: 0.12s; width: 120px"
				(mouseover)="addButtonHover = true"
				(mouseout)="addButtonHover = false"
				(focusin)="addButtonHover = true"
				(focusout)="addButtonHover = false"
				(click)="ShowAddBookDialog()">

				<div
					class="card-body d-flex justify-content-center align-items-center"
					style="padding: 12px 14px">

					<i class="ms-Icon ms-Icon--Add text-color"
						aria-hidden="true"
						style="font-size: 20px">
					</i>
				</div>
			</button>
		</div>

		<div class="d-flex flex-column" dragula="books" [dragulaModel]="books" (dragulaModelChange)="BooksReordered($event)">
			<div
				class="mx-auto"
				style="display: inline-block"
				*ngFor="let book of books; let i = index">

				<hr
					class="mx-2"
					[style.backgroundColor]="dataService.darkTheme ? '#707070' : '#ededed'"
					[style.visibility]="dragging ? 'hidden' : 'visible'">

				<div
					class="card cursor shadow-sm theme-background-color-secondary"
					style="display: inline-block"
					(contextmenu)="ShowBookContextMenu($event, book)">

					<pocketlib-blurhash-image
						[src]="book.coverContent"
						[fallback]="dataService.defaultStoreBookCover"
						[blurhash]="book.coverBlurhash"
						[title]="book.title"
						height="180">
					</pocketlib-blurhash-image>
				</div>
			</div>
		</div>
	</div>
</div>

<dav-context-menu
	#contextMenu
	[isVisible]="contextMenuVisible"
	[posX]="contextMenuPositionY"
	[posY]="contextMenuPositionX">

	<!-- Remove -->
	<dav-context-menu-item
		[value]="locale.bookContextMenuRemove"
		icon="Delete"
		(click)="RemoveBook()">
	</dav-context-menu-item>
</dav-context-menu>

<dav-dialog
	[header]="locale.namesDialog.header"
	[defaultButtonText]="locale.close"
	[isVisible]="namesDialogVisible"
	(dismiss)="namesDialogVisible = false"
	(defaultButtonClick)="namesDialogVisible = false">

	<!-- Names -->
	<pocketlib-edit-names
		[names]="seriesNames"
		[uuid]="uuid"
		type="series"
		(update)="UpdateSeriesName($event)">
	</pocketlib-edit-names>
</dav-dialog>