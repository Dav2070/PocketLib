<div class="container ms-motion-slideUpIn">
	<h1 class="text-center font-weight-light mt-3 text-color">{{ locale.title }}</h1>

   <div class="mt-3 row justify-content-center">
      <!-- Card for adding new book -->
		<div
			class="card cursor m-2 theme-background-color-secondary"
			style="width: 180px; transition: 0.12s" 
			[ngClass]="addBookHover ? 'shadow' : 'shadow-sm'"
			ngxFilePicker
			accept="application/epub+zip,application/pdf"
			(filePick)="filePick($event)"
			(mouseover)="addBookHover = true"
			(mouseout)="addBookHover = false">
			
			<div class="card-body d-flex justify-content-center align-items-center">
				<i class="ms-Icon ms-Icon--Add text-color"
					aria-hidden="true"
					style="font-size: 22px"
					[@addBookHover]="addBookHover">
				</i>
         </div>
      </div>

		<div
			class="card m-2 cursor theme-background-color-secondary"
			[ngClass]="hoveredBookIndex == i ? 'shadow' : 'shadow-sm'"
			style="width: 180px; transition: 0.12s" 
			*ngFor="let book of dataService.books; let i = index" 
   		(click)="ShowBook(book)" 
			(contextmenu)="onContextMenu($event, book)"
			(mouseover)="hoveredBookIndex = i"
			(mouseout)="hoveredBookIndex = -1">

			<img
				[src]="book.cover ? book.cover : dataService.defaultStoreBookCover"
				class="card-img-top"
				style="width: 100%; height: 270px; object-fit: cover;">

         <div class="card-body">
				<p class="card-text text-center text-color"
					style="max-width: 150px; font-size: 15px">
					{{ book.title }}
				</p>
         </div>
      </div>
	</div>
</div>

<div
	#contextMenu 
	class="dropdown-menu shadow-sm ms-motion-slideDownIn theme-background-color-tertiary" 
	[ngClass]="contextMenuVisible ? 'show' : ''"
	style="position: absolute;" 
	[style.left.px]="contextMenuPositionX" 
	[style.top.px]="contextMenuPositionY">

	<!-- Rename -->
	<div
		class="dropdown-item d-flex cursor"
		style="padding-left: 10px; padding-right: 10px"
		*ngIf="showRenameBookOption"
		(click)="ShowRenameBookModal()">

		<i class="ms-Icon ms-Icon--Edit text-color"
			aria-hidden="true"
			style="font-size: 16px; margin-right: 10px; margin-top: 2px">
		</i>

		<span
			class="text-color"
			style="margin-top: 3px; margin-bottom: 2px">
			{{ locale.bookContextMenuRename }}
		</span>
	</div>
	
	<!-- Delete -->
	<div
		class="dropdown-item d-flex cursor"
		style="padding-left: 10px; padding-right: 10px"
		(click)="ShowDeleteBookModal()">

		<i class="ms-Icon ms-Icon--Delete text-color"
			aria-hidden="true"
			style="font-size: 16px; margin-right: 10px; margin-top: 2px">
		</i>

		<span
			class="text-color"
			style="margin-top: 3px; margin-bottom: 2px">
			{{ locale.bookContextMenuDelete }}
		</span>
	</div>
</div>

<pocketlib-rename-book-modal (save)="RenameBook($event)"></pocketlib-rename-book-modal>
<pocketlib-delete-book-modal (delete)="DeleteBook()"></pocketlib-delete-book-modal>