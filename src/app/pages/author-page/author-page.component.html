<pocketlib-author-profile
	*ngIf="dataService.userAuthor || (dataService.userIsAdmin && uuid)"
	[uuid]="uuid"
></pocketlib-author-profile>

<!-- Admin view -->
<div
	class="container slide-up-in"
	*ngIf="dataService.userIsAdmin && !uuid"
>
	<!-- List of publishers -->
	<div class="header-container">
		<dav-header
			size="small"
			addButtonVisible
			(addButtonClick)="ShowCreatePublisherDialog()"
		>
			{{ locale.yourPublishers }}
		</dav-header>
	</div>

	<div class="list-container">
		<dav-list>
			<dav-list-item
				[headline]="publisher.name"
				size="small"
				(click)="ShowPublisher(publisher.uuid)"
				*ngFor="let publisher of dataService.adminPublishers"
			></dav-list-item>
		</dav-list>
	</div>

	<!-- List of authors -->
	<div class="header-container">
		<dav-header
			size="small"
			addButtonVisible
			(addButtonClick)="ShowCreateAuthorDialog()"
		>
			{{ locale.yourAuthors }}
		</dav-header>
	</div>

	<div class="list-container">
		<dav-list>
			<dav-list-item
				[headline]="author.firstName + ' ' + author.lastName"
				size="small"
				(click)="ShowAuthor(author.uuid)"
				*ngFor="let author of dataService.adminAuthors"
			></dav-list-item>
		</dav-list>
	</div>

	<!-- List of books in review -->
	<div class="header-container">
		<dav-header size="small">
			{{ locale.booksInReview }}
		</dav-header>
	</div>

	<div class="list-container">
		<dav-list>
			<dav-list-item
				[headline]="book.title"
				[subhead]="book.author"
				size="small"
				(click)="ShowBook(book.uuid)"
				*ngFor="let book of booksInReview"
			></dav-list-item>
		</dav-list>
	</div>
</div>

<dav-dialog
	[headline]="locale.createPublisherDialog.headline"
	[primaryButtonText]="locale.create"
	[defaultButtonText]="locale.cancel"
	[visible]="createPublisherDialogVisible"
	[loading]="createPublisherDialogLoading"
	maxWidth="340"
	(dismiss)="createPublisherDialogVisible = false"
	(primaryButtonClick)="CreatePublisher()"
	(defaultButtonClick)="createPublisherDialogVisible = false"
>
	<form>
		<!-- Name -->
		<div class="dialog-formfield-container">
			<dav-textfield
				[value]="createPublisherDialogName"
				[label]="locale.createPublisherDialog.nameTextfieldLabel"
				[placeholder]="
					locale.createPublisherDialog.nameTextfieldPlaceholder
				"
				[disabled]="createPublisherDialogLoading"
				[errorMessage]="createPublisherDialogNameError"
				(change)="
					createPublisherDialogName = $event.detail.value;
					createPublisherDialogNameError = ''
				"
				(enter)="CreatePublisher()"
			></dav-textfield>
		</div>
	</form>
</dav-dialog>

<dav-dialog
	[headline]="locale.createAuthorDialog.headline"
	[primaryButtonText]="locale.create"
	[defaultButtonText]="locale.cancel"
	[visible]="createAuthorDialogVisible"
	[loading]="createAuthorDialogLoading"
	maxWidth="340"
	(dismiss)="createAuthorDialogVisible = false"
	(primaryButtonClick)="CreateAuthor()"
	(defaultButtonClick)="createAuthorDialogVisible = false"
>
	<form>
		<!-- First name -->
		<div class="dialog-formfield-container">
			<dav-textfield
				[value]="createAuthorDialogFirstName"
				[label]="locale.createAuthorDialog.firstNameTextfieldLabel"
				[placeholder]="
					locale.createAuthorDialog.firstNameTextfieldPlaceholder
				"
				autocomplete="given-name"
				[disabled]="createAuthorDialogLoading"
				[errorMessage]="createAuthorDialogFirstNameError"
				(change)="
					createAuthorDialogFirstName = $event.detail.value;
					createAuthorDialogFirstNameError = ''
				"
			></dav-textfield>
		</div>

		<!-- Last name -->
		<div class="dialog-formfield-container">
			<dav-textfield
				[value]="createAuthorDialogLastName"
				[label]="locale.createAuthorDialog.lastNameTextfieldLabel"
				[placeholder]="
					locale.createAuthorDialog.lastNameTextfieldPlaceholder
				"
				autocomplete="family-name"
				[disabled]="createAuthorDialogLoading"
				[errorMessage]="createAuthorDialogLastNameError"
				(change)="
					createAuthorDialogLastName = $event.detail.value;
					createAuthorDialogLastNameError = ''
				"
				(enter)="CreateAuthor()"
			></dav-textfield>
		</div>
	</form>
</dav-dialog>
